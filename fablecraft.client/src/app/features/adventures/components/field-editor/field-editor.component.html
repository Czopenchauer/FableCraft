<div class="field-body">
  <div class="field-row">
    <label>Name</label>
    <input
      [(ngModel)]="field.name"
      [disabled]="isFrameworkField"
      class="field-input"
      type="text"
    />
  </div>

  <div class="field-row">
    <label>Type</label>
    <select
      [(ngModel)]="field.type"
      [disabled]="isFrameworkField"
      class="field-select"
    >
      <option [value]="FieldType.String">String</option>
      <option [value]="FieldType.Array">Array</option>
      <option [value]="FieldType.Object">Object</option>
      <option [value]="FieldType.ForEachObject">ForEachObject</option>
    </select>
  </div>

  <div class="field-row">
    <label>Prompt</label>
    <textarea
      [(ngModel)]="field.prompt"
      class="field-textarea"
      rows="2"
    ></textarea>
  </div>

  <div class="field-row">
    <label>Default</label>
    <input
      [(ngModel)]="field.defaultValue"
      class="field-input"
      type="text"
    />
  </div>

  <div class="field-row">
    <label>Examples</label>
    <div class="example-values">
      <div *ngFor="let example of field.exampleValues; let j = index; trackBy: trackByIndex" class="example-value-row">
        <input
          [(ngModel)]="field.exampleValues![j]"
          class="field-input"
          type="text"
        />
        <button (click)="removeExampleValue(j)" class="btn-remove-small">×</button>
      </div>
      <button (click)="addExampleValue()" class="btn-add-small">+ Example</button>
    </div>
  </div>

  <!-- Nested Fields for Object and ForEachObject types -->
  <div *ngIf="field.type === FieldType.Object || field.type === FieldType.ForEachObject" class="nested-fields">
    <div class="nested-header">
      <label>Nested Fields</label>
    </div>
    <div *ngFor="let nested of field.nestedFields; let k = index; trackBy: trackByIndex"
         [style.margin-left.px]="nestingLevel * 10"
         class="nested-field-card">
      <div class="nested-field-header">
        <span class="nested-field-name">{{ nested.name }}</span>
        <button (click)="removeNestedField(k)" class="btn-remove-small">×</button>
      </div>
      <!-- Recursive field editor -->
      <app-field-editor
        [field]="nested"
        [isFrameworkField]="false"
        [nestingLevel]="nestingLevel + 1">
      </app-field-editor>
    </div>
    <button (click)="addNestedField()" class="btn-add-small">+ Add Nested Field</button>
  </div>
</div>
