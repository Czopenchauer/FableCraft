<div class="tracker-definition-manager">
  <div class="content">
    <!-- Header -->
    <div class="header">
      <h2 class="page-title">Tracker Definitions</h2>
      <button class="btn-create" routerLink="/adventures/tracker-definitions/create">
        <svg [attr.fill]="'none'" [attr.stroke]="'currentColor'" viewBox="0 0 24 24">
          <path [attr.d]="'M12 4v16m8-8H4'" [attr.stroke-linecap]="'round'" [attr.stroke-linejoin]="'round'"
                [attr.stroke-width]="2"></path>
        </svg>
        <span>Create New Tracker Definition</span>
      </button>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-state">
      <div class="loading-content">
        <svg [attr.fill]="'none'" class="spinner" viewBox="0 0 24 24">
          <circle [attr.cx]="12" [attr.cy]="12" [attr.r]="10" [attr.stroke-width]="4" [attr.stroke]="'currentColor'"
                  class="opacity-25"></circle>
          <path
            [attr.d]="'M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z'"
            [attr.fill]="'currentColor'"
            class="opacity-75"></path>
        </svg>
        <p class="loading-text">Loading tracker definitions...</p>
      </div>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !isLoading" class="error-state">
      <div class="error-content">
        <svg [attr.fill]="'none'" [attr.stroke]="'currentColor'" class="error-icon" viewBox="0 0 24 24">
          <path [attr.d]="'M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z'" [attr.stroke-linecap]="'round'"
                [attr.stroke-linejoin]="'round'"
                [attr.stroke-width]="2"></path>
        </svg>
        <div class="error-text">
          <h3 class="error-title">Error Loading Tracker Definitions</h3>
          <p class="error-message">{{ error }}</p>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && !error && definitions.length === 0" class="empty-state">
      <div class="empty-content">
        <svg [attr.fill]="'none'" [attr.stroke]="'currentColor'" class="empty-icon" viewBox="0 0 24 24">
          <path
            [attr.d]="'M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01'"
            [attr.stroke-linecap]="'round'" [attr.stroke-linejoin]="'round'"
            [attr.stroke-width]="2"></path>
        </svg>
        <h2 class="empty-title">No Tracker Definitions Yet</h2>
        <p class="empty-description">
          Create your first tracker definition to start tracking custom metrics in your adventures.
        </p>
        <button
          routerLink="/adventures/tracker-definitions/create"
          class="btn-create-first"
        >
          <svg [attr.fill]="'none'" [attr.stroke]="'currentColor'" viewBox="0 0 24 24">
            <path [attr.d]="'M12 4v16m8-8H4'" [attr.stroke-linecap]="'round'" [attr.stroke-linejoin]="'round'"
                  [attr.stroke-width]="2"></path>
          </svg>
          <span>Create Your First Tracker Definition</span>
        </button>
      </div>
    </div>

    <!-- Definitions Grid -->
    <div *ngIf="!isLoading && definitions.length > 0" class="definitions-grid">
      <div
        *ngFor="let definition of definitions"
        class="definition-card"
      >
        <!-- Card Header with Actions -->
        <div class="card-header">
          <h3 class="card-title">{{ definition.name }}</h3>
          <div class="card-actions">
            <button
              class="action-button action-view"
              [routerLink]="['/adventures/tracker-definitions', definition.id]"
              title="View"
              (click)="$event.stopPropagation()"
            >
              <svg [attr.fill]="'none'" [attr.stroke]="'currentColor'" viewBox="0 0 24 24">
                <path [attr.d]="'M15 12a3 3 0 11-6 0 3 3 0 016 0z'" [attr.stroke-linecap]="'round'"
                      [attr.stroke-linejoin]="'round'" [attr.stroke-width]="2"></path>
                <path [attr.d]="'M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z'" [attr.stroke-linecap]="'round'"
                      [attr.stroke-linejoin]="'round'" [attr.stroke-width]="2"></path>
              </svg>
            </button>
            <button
              class="action-button action-edit"
              [routerLink]="['/adventures/tracker-definitions', definition.id, 'edit']"
              title="Edit"
              (click)="$event.stopPropagation()"
            >
              <svg [attr.fill]="'none'" [attr.stroke]="'currentColor'" viewBox="0 0 24 24">
                <path [attr.d]="'M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z'" [attr.stroke-linecap]="'round'"
                      [attr.stroke-linejoin]="'round'" [attr.stroke-width]="2"></path>
              </svg>
            </button>
            <button
              class="action-button action-duplicate"
              (click)="onDuplicate(definition); $event.stopPropagation()"
              title="Duplicate"
            >
              <svg [attr.fill]="'none'" [attr.stroke]="'currentColor'" viewBox="0 0 24 24">
                <path [attr.d]="'M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z'" [attr.stroke-linecap]="'round'"
                      [attr.stroke-linejoin]="'round'" [attr.stroke-width]="2"></path>
              </svg>
            </button>
            <button
              class="action-button action-delete"
              (click)="onDelete(definition); $event.stopPropagation()"
              title="Delete"
            >
              <svg [attr.fill]="'none'" [attr.stroke]="'currentColor'" viewBox="0 0 24 24">
                <path
                  [attr.d]="'M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16'"
                  [attr.stroke-linecap]="'round'" [attr.stroke-linejoin]="'round'"
                  [attr.stroke-width]="2"></path>
              </svg>
            </button>
          </div>
        </div>

        <!-- Card Meta -->
        <div class="card-meta">
          <div class="meta-item">
            <svg [attr.fill]="'none'" [attr.stroke]="'currentColor'" viewBox="0 0 24 24">
              <path [attr.d]="'M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z'" [attr.stroke-linecap]="'round'"
                    [attr.stroke-linejoin]="'round'"
                    [attr.stroke-width]="2"></path>
            </svg>
            <span class="meta-id">{{ definition.id }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
